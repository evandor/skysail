<link rel="import" href="/_polymer/bower_components/polymer/polymer.html">

<dom-module id="sky-form-field-help">
  
  <template>
  
    <style>
      :host {
        display: block;
      }
    </style>
    
    <template is="dom-if" if="{{editable(editBaseUrl)}}">
        <small class="help-block"><a href='{{editBaseUrl}}/messages/{{identifier}}/?type=fielddesc' class="hvr-glow" style="color:#333">{{contentOrLink(helpMessage)}}</a></small>  
    </template>
    <template is="dom-if" if="{{!editable(editBaseUrl)}}">
      <template is="dom-if" if="{{helpProvided(helpMessage)}}">
        <small class="help-block">{{helpMessage}}</small>  
      </template>
    </template>
  </template>
  
  <script>
    Polymer({
      is: 'sky-form-field-help',
      properties: {
        identifier: String,
        helpMessage: String,
        editBaseUrl:  { type: String, value: null }
      },
      helpProvided: function (helpMsg) {
      	return helpMsg != null && helpMsg.length > 0;
      },
      contentOrLink: function (content) {
        if (content == null || content.trim().length == 0) {
          return "...";
        }
        return content;
      },
      editable: function(url) {
        return url != null && url.length > 0;
      }
    });
  </script>
</dom-module>
